<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />

    <link rel="stylesheet" href="./style.css">
</head>

<body>

    <div class="container mt-5">
        <div class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body" id="map">map</div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="card">
                    <div class="card-body" id="chartdiv">table</div>
                </div>
            </div>
        </div>
    </div>


</body>
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

<script src="./tam_json.js"></script>

<script>

    var map = L.map('map').setView([18.802812, 98.950313], 13);

    var topoMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
    });
    topoMap.addTo(map);

    var greenIcon = L.icon({
        iconUrl: './leaf-green.png',
        shadowUrl: './leaf-shadow.png',

        iconSize: [38, 95], // size of the icon
        shadowSize: [50, 64], // size of the shadow
        iconAnchor: [22, 94], // point of the icon which will correspond to marker's location
        shadowAnchor: [4, 62],  // the same for the shadow
        popupAnchor: [-3, -76] // point from which the popup should open relative to the iconAnchor
    });

    // var m1 = L.marker([18.802812, 98.950313], { icon: greenIcon });
    // m1.addTo(map).bindPopup("<h3>ภาควิชาภูมิศาสตร์</h3> <br> คณะสังคมศาสตร์ <br> มหาวิทยาลัยเชียงใหม่").openPopup();

    // var m2 = L.marker([18.804826, 98.955111], { icon: greenIcon });
    // m2.addTo(map).bindPopup("สนง.อธิการบดี");

    var myStyle = {
        "color": "#ff7800",
        "fillColor": "#afe0d2",
        "weight": 5,
        "opacity": 0.55
    };

    L.geoJSON(tam, { style: myStyle }).addTo(map).bindPopup("ศรีภูมิ")


    // chart area
    am4core.ready(function () {

        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        var chart = am4core.create("chartdiv", am4charts.XYChart);
        chart.padding(40, 40, 40, 40);

        var categoryAxis = chart.yAxes.push(new am4charts.CategoryAxis());
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.dataFields.category = "network";
        categoryAxis.renderer.minGridDistance = 1;
        categoryAxis.renderer.inversed = true;
        categoryAxis.renderer.grid.template.disabled = true;

        var valueAxis = chart.xAxes.push(new am4charts.ValueAxis());
        valueAxis.min = 0;

        var series = chart.series.push(new am4charts.ColumnSeries());
        series.dataFields.categoryY = "network";
        series.dataFields.valueX = "MAU";
        series.tooltipText = "{valueX.value}"
        series.columns.template.strokeOpacity = 0;
        series.columns.template.column.cornerRadiusBottomRight = 5;
        series.columns.template.column.cornerRadiusTopRight = 5;

        var labelBullet = series.bullets.push(new am4charts.LabelBullet())
        labelBullet.label.horizontalCenter = "left";
        labelBullet.label.dx = 10;
        labelBullet.label.text = "{values.valueX.workingValue.formatNumber('#.0as')}";
        labelBullet.locationX = 1;

        // as by default columns of the same series are of the same color, we add adapter which takes colors from chart.colors color set
        series.columns.template.adapter.add("fill", function (fill, target) {
            return chart.colors.getIndex(target.dataItem.index);
        });

        categoryAxis.sortBySeries = series;
        chart.data = [
            {
                "network": "Facebook",
                "MAU": 2255250000
            },
            {
                "network": "Google+",
                "MAU": 430000000
            },
            {
                "network": "Instagram",
                "MAU": 1000000000
            },
            {
                "network": "Pinterest",
                "MAU": 246500000
            },
            {
                "network": "Reddit",
                "MAU": 355000000
            },
            {
                "network": "TikTok",
                "MAU": 500000000
            },
            {
                "network": "Tumblr",
                "MAU": 624000000
            },
            {
                "network": "Twitter",
                "MAU": 329500000
            },
            {
                "network": "WeChat",
                "MAU": 1000000000
            },
            {
                "network": "Weibo",
                "MAU": 431000000
            },
            {
                "network": "Whatsapp",
                "MAU": 1433333333
            },
            {
                "network": "YouTube",
                "MAU": 1900000000
            }
        ]

    });
</script>

</html>